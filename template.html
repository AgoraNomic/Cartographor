<!DOCTYPE html>
<head>
  <title>The Map of Arcadia - {{date}}</title>
  <style>
  	#map {
  		border-collapse: collapse;
  	}
  	
  	.cell {
  		width: 20px;
  		height: 20px;
  		border-color: darkgray;
		text-align: center;
  	}
  	
  	.cell[type=a] {
  		background-color: lightgray;
  	}
  	
  	.cell[type=b] {
		background-color: black;
		color: white;
  	}
  	
  	.cell[type=w] {
  		background-color: white;
		color: black;
  	}

  	.cell[type=g] {
  		background-color: gray;
  	}

	#playerlist {
		border-collapse: collapse;
	}
  </style>
  <script>
  	var stats = {{attributes}};
  	var displayNames = {{dispnames}}
  	
  	function getStats(x, y) {
  		s = document.getElementById("stats");
  		s.innerHTML = "lat: " + y + "<br>long: " + x + "<br>";
  		for (var i = 0; i < stats.length; i++) {
  			text = document.getElementById("r" + y + "c" + x).getAttribute(stats[i])
			if (stats[i] == "link") {
			    var textList = text.split(" ")
			    var fullLink = "https://mail-archive.com/agora-" + textList[0] + "@agoranomic.org/msg" + textList[1] + ".html"
				s.innerHTML += displayNames[i] + ": <a href='" + fullLink + "'>https://" + fullLink + "</a><br>";
			} else {
	  			s.innerHTML += displayNames[i] + ": " + text + "<br>";
	  		}
  		}
  	}
  </script>
</head>
<body>
  <h1>The Map of Arcadia</h1>
  <p>The Cartographor's Report. Up-to-date until {{date}}</p>
  <table id='map' border='1'>
{{tabledata}}
  </table>
  <h2>Attributes (click a square)</h2>
  <div id='stats'></div>
  <h2>Player locations</h2>
  <table id='playerlist' border='1'>
{{players}}
  </table>
</body>
